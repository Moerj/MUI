"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var s=e[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,r,s){return r&&t(e.prototype,r),s&&t(e,s),e}}();/**
 * jQloader v0.0.5
 * @license: MIT
 * Designed and built by Moer
 * github   https://github.com/Moerj/jQloader
 */
!function(t){function e(t){void 0===t._jQloader&&(t._jQloader={}),void 0===t._jQloader.loadFinishEvents&&(t._jQloader.loadFinishEvents=[]),void 0===t._jQloader.loadFinish&&(t._jQloader.loadFinish=function(){for(var e=t._jQloader.loadFinishEvents,r=0;r<e.length;r++)e[r]()})}function r(){for(var e=document.getElementsByTagName("jq-include"),r=0;r<e.length;r++){var s=t(e[r]),o=s.attr("src");o&&!function(){var e=t("<div></div>");s.replaceWith(e),e.loadPage({url:o,history:!1,progress:!1},function(){e.children().eq(0).unwrap()})}()}}function s(){var e=document.location.hash.substr(1),r=t("jq-router");if(e)r.loadPage({url:e,history:!1,progress:!1,title:history.state});else{var s=sessionStorage.getItem("jqRouterReload");s?sessionStorage.removeItem("jqRouterReload"):(sessionStorage.setItem("jqRouterReload",!0),window.location.reload())}}var o=function(){function e(){_classCallCheck(this,e),this.color="#58a2d1",this.transition="10s width",this.timer=null,this.$progress=t("<span></span>"),this.reset(),t("html").append(this.$progress)}return _createClass(e,[{key:"reset",value:function(){this.$progress.css({backgroundColor:this.color,transition:"none",height:"2px",width:0,position:"fixed",left:0,top:0,zIndex:9999,boxShadow:"1px 1px 2px 0 "+this.color})}},{key:"max",value:function(){return document.body.clientWidth}},{key:"setColor",value:function(t){"string"==typeof t&&(this.color=t)}},{key:"start",value:function(){this.reset(),this.$progress.css({width:this.max(),transition:this.transition})}},{key:"stop",value:function(){this.$progress.css({width:this.$progress.width()})}},{key:"finish",value:function(){var t=this;this.stop(),this.$progress.css({width:this.max(),transition:"0.5s width"}),this.timer||(this.timer=setTimeout(function(){t.timer=null,t.reset()},700))}},{key:"destroy",value:function(){this.$progress.remove(),this.$progress=null}}]),e}();window.addEventListener("popstate",function(){s()}),t.fn.loadFinish=function(e){var r=t(this);return r[0]._jQloader.loadFinishEvents.push(e),r},t.fn.loadPage=function(s,o){var n=t(this);if(!n.length)return console.error(n.selector+" not a vaild selector"),n;var i={history:!0,progress:!0,cache:!0,async:!0,title:null};return s=t.extend({},i,s),e(n[0]),s.progress&&t.progressBar.start(),t.ajax({dataType:"html",url:s.url,cache:s.cache,async:s.async,timeout:1e4,success:function(e){if(s.history&&"jq-router"===n[0].localName){var o=s.url;"./"===s.url.substring(0,2)&&(o=s.url.substring(2)),history.pushState(s.title,"","#"+o)}if(s.title&&(window.document.title=s.title),n.html(e),"undefined"!=typeof Zepto&&"undefined"==typeof jQuery)for(var i=n.find("script"),a=0;a<i.length;a++){var l=i[a].src;l?t.get(l):t(i[a]).remove()}r(),n[0]._jQloader.loadFinish()},error:function(){console.warn("页面载入失败！")},complete:function(){s.progress&&t.progressBar.finish(),o&&o()}}),n},t.progressBar||(t.progressBar=new o),t(function(){r(),s()})}($);
